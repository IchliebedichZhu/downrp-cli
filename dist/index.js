#!/usr/bin/env node
"use strict";var inquirer=require("inquirer"),download=require("download-git-repo"),path=require("path"),ora=require("ora");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var inquirer__default=_interopDefaultLegacy(inquirer),download__default=_interopDefaultLegacy(download),path__default=_interopDefaultLegacy(path),ora__default=_interopDefaultLegacy(ora),RepositoryList={"taro-react-kit-2.x":"direct:https://bitbucket.org/JeremyYu_1122/taro-react-kit-2.x/get/master.zip","taro-react-kit-ts-3.x":"direct:https://bitbucket.org/JeremyYu_1122/taro-react-kit-ts-3.x/get/master.zip"};const PROMPT_LIST=[{type:"input",message:"enter your projectName",name:"projectName",default:"test"},{type:"list",message:"choose download template",name:"templateName",choices:Object.keys(Object.assign(RepositoryList,{custom:""}))}],CUSTOM_TEMPLATE=[{type:"input",message:"custom repository url",name:"repositoryUrl"}];function downloadTemplate(i){return new Promise(t=>{var e=process.cwd(),{projectName:a,templateName:r,repositoryUrl:o}=i,a=path__default.default.resolve(e,a),r=o?`direct:${o}`:RepositoryList[r];download__default.default(r,a,{},e=>{e&&(console.log(e),t(!1)),t(!0)})})}async function handlePromptMethod(e){try{const t=ora__default.default("start download template").start();await downloadTemplate(e)?t.succeed("download template success"):t.fail("download fail")}catch(e){console.log(e)}}inquirer__default.default.prompt(PROMPT_LIST).then(async e=>{var{templateName:t}=e;let a=e;"custom"===t&&(t=await inquirer__default.default.prompt(CUSTOM_TEMPLATE),a=Object.assign(a,t)),handlePromptMethod(a)});
